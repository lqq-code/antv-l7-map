!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@antv/l7")):"function"==typeof define&&define.amd?define(["exports","@antv/l7"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).L7=e.L7||{},e.L7.District={}),e.L7)}(this,(function(e,t){"use strict";function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function i(e){for(var t=1;arguments.length>t;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(e,t,r,i,n,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(i,n)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;t.length>r;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=f(e);if(t){var n=f(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return h(this,r)}}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=y(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(3>arguments.length?e:r):n.value}},v.apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var i,n,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(i=r.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);t>r;r++)i[r]=e[r];return i}var w=function(e,t){return e===t||e!=e&&t!=t};var L=function(e,t){for(var r=e.length;r--;)if(w(e[r][0],t))return r;return-1},m=Array.prototype.splice;var x=function(e){var t=this.__data__,r=L(t,e);return r>=0&&(r==t.length-1?t.pop():m.call(t,r,1),--this.size,!0)};var k=function(e){var t=this.__data__,r=L(t,e);return 0>r?void 0:t[r][1]};var j=function(e){return L(this.__data__,e)>-1};var O=function(e,t){var r=this.__data__,i=L(r,e);return 0>i?(++this.size,r.push([e,t])):r[i][1]=t,this};function _(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}_.prototype.clear=function(){this.__data__=[],this.size=0},_.prototype.delete=x,_.prototype.get=k,_.prototype.has=j,_.prototype.set=O;var D=_;var P=function(){this.__data__=new D,this.size=0};var F=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var S=function(e){return this.__data__.get(e)};var C=function(e){return this.__data__.has(e)},A="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function V(e,t){return e(t={exports:{}},t.exports),t.exports}var M="object"==typeof A&&A&&A.Object===Object&&A,B="object"==typeof self&&self&&self.Object===Object&&self,R=M||B||Function("return this")(),T=R.Symbol,E=Object.prototype,z=E.hasOwnProperty,N=E.toString,I=T?T.toStringTag:void 0;var U=function(e){var t=z.call(e,I),r=e[I];try{e[I]=void 0;var i=!0}catch(e){}var n=N.call(e);return i&&(t?e[I]=r:delete e[I]),n},W=Object.prototype.toString;var H=function(e){return W.call(e)},G=T?T.toStringTag:void 0;var $=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":G&&G in Object(e)?U(e):H(e)};var q=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var Z,J=function(e){if(!q(e))return!1;var t=$(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Y=R["__core-js_shared__"],K=(Z=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"";var Q=function(e){return!!K&&K in e},X=Function.prototype.toString;var ee=function(e){if(null!=e){try{return X.call(e)}catch(e){}try{return e+""}catch(e){}}return""},te=/^\[object .+?Constructor\]$/,re=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ie=function(e){return!(!q(e)||Q(e))&&(J(e)?re:te).test(ee(e))};var ne=function(e,t){return null==e?void 0:e[t]};var oe=function(e,t){var r=ne(e,t);return ie(r)?r:void 0},ae=oe(R,"Map"),se=oe(Object,"create");var ue=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},le=Object.prototype.hasOwnProperty;var ce=function(e){var t=this.__data__;if(se){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return le.call(t,e)?t[e]:void 0},fe=Object.prototype.hasOwnProperty;var pe=function(e){var t=this.__data__;return se?void 0!==t[e]:fe.call(t,e)};var he=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=se&&void 0===t?"__lodash_hash_undefined__":t,this};function de(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}de.prototype.clear=function(){this.__data__=se?se(null):{},this.size=0},de.prototype.delete=ue,de.prototype.get=ce,de.prototype.has=pe,de.prototype.set=he;var ye=de;var ve=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var be=function(e,t){var r=e.__data__;return ve(t)?r["string"==typeof t?"string":"hash"]:r.map};var ge=function(e){var t=be(this,e).delete(e);return this.size-=t?1:0,t};var we=function(e){return be(this,e).get(e)};var Le=function(e){return be(this,e).has(e)};var me=function(e,t){var r=be(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};function xe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}xe.prototype.clear=function(){this.size=0,this.__data__={hash:new ye,map:new(ae||D),string:new ye}},xe.prototype.delete=ge,xe.prototype.get=we,xe.prototype.has=Le,xe.prototype.set=me;var ke=xe;var je=function(e,t){var r=this.__data__;if(r instanceof D){var i=r.__data__;if(!ae||199>i.length)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new ke(i)}return r.set(e,t),this.size=r.size,this};function Oe(e){var t=this.__data__=new D(e);this.size=t.size}Oe.prototype.clear=P,Oe.prototype.delete=F,Oe.prototype.get=S,Oe.prototype.has=C,Oe.prototype.set=je;var _e=Oe,De=function(){try{var e=oe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Pe=function(e,t,r){"__proto__"==t&&De?De(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};var Fe=function(e,t,r){(void 0!==r&&!w(e[t],r)||void 0===r&&!(t in e))&&Pe(e,t,r)};var Se=function(e){return function(t,r,i){for(var n=-1,o=Object(t),a=i(t),s=a.length;s--;){var u=a[e?s:++n];if(!1===r(o[u],u,o))break}return t}}(),Ce=V((function(e,t){var r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,n=i&&i.exports===r?R.Buffer:void 0,o=n?n.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,i=o?o(r):new e.constructor(r);return e.copy(i),i}})),Ae=R.Uint8Array;var Ve=function(e){var t=new e.constructor(e.byteLength);return new Ae(t).set(new Ae(e)),t};var Me=function(e,t){var r=t?Ve(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var Be=function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t},Re=Object.create,Te=function(){function e(){}return function(t){if(!q(t))return{};if(Re)return Re(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var Ee=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object),ze=Object.prototype;var Ne=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ze)};var Ie=function(e){return"function"!=typeof e.constructor||Ne(e)?{}:Te(Ee(e))};var Ue=function(e){return null!=e&&"object"==typeof e};var We=function(e){return Ue(e)&&"[object Arguments]"==$(e)},He=Object.prototype,Ge=He.hasOwnProperty,$e=He.propertyIsEnumerable,qe=We(function(){return arguments}())?We:function(e){return Ue(e)&&Ge.call(e,"callee")&&!$e.call(e,"callee")},Ze=qe,Je=Array.isArray;var Ye=function(e){return"number"==typeof e&&e>-1&&e%1==0&&9007199254740991>=e};var Ke=function(e){return null!=e&&Ye(e.length)&&!J(e)};var Qe=function(e){return Ue(e)&&Ke(e)};var Xe=function(){return!1},et=V((function(e,t){var r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,n=i&&i.exports===r?R.Buffer:void 0;e.exports=(n?n.isBuffer:void 0)||Xe})),tt=Function.prototype.toString,rt=Object.prototype.hasOwnProperty,it=tt.call(Object);var nt=function(e){if(!Ue(e)||"[object Object]"!=$(e))return!1;var t=Ee(e);if(null===t)return!0;var r=rt.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&tt.call(r)==it},ot={};ot["[object Float32Array]"]=ot["[object Float64Array]"]=ot["[object Int8Array]"]=ot["[object Int16Array]"]=ot["[object Int32Array]"]=ot["[object Uint8Array]"]=ot["[object Uint8ClampedArray]"]=ot["[object Uint16Array]"]=ot["[object Uint32Array]"]=!0,ot["[object Arguments]"]=ot["[object Array]"]=ot["[object ArrayBuffer]"]=ot["[object Boolean]"]=ot["[object DataView]"]=ot["[object Date]"]=ot["[object Error]"]=ot["[object Function]"]=ot["[object Map]"]=ot["[object Number]"]=ot["[object Object]"]=ot["[object RegExp]"]=ot["[object Set]"]=ot["[object String]"]=ot["[object WeakMap]"]=!1;var at=function(e){return Ue(e)&&Ye(e.length)&&!!ot[$(e)]};var st=function(e){return function(t){return e(t)}},ut=V((function(e,t){var r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,n=i&&i.exports===r&&M.process,o=function(){try{var e=i&&i.require&&i.require("util").types;return e||n&&n.binding&&n.binding("util")}catch(e){}}();e.exports=o})),lt=ut&&ut.isTypedArray,ct=lt?st(lt):at;var ft=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},pt=Object.prototype.hasOwnProperty;var ht=function(e,t,r){var i=e[t];pt.call(e,t)&&w(i,r)&&(void 0!==r||t in e)||Pe(e,t,r)};var dt=function(e,t,r,i){var n=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=i?i(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),n?Pe(r,s,u):ht(r,s,u)}return r};var yt=function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i},vt=/^(?:0|[1-9]\d*)$/;var bt=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&vt.test(e))&&e>-1&&e%1==0&&t>e},gt=Object.prototype.hasOwnProperty;var wt=function(e,t){var r=Je(e),i=!r&&Ze(e),n=!r&&!i&&et(e),o=!r&&!i&&!n&&ct(e),a=r||i||n||o,s=a?yt(e.length,String):[],u=s.length;for(var l in e)!t&&!gt.call(e,l)||a&&("length"==l||n&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||bt(l,u))||s.push(l);return s};var Lt=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},mt=Object.prototype.hasOwnProperty;var xt=function(e){if(!q(e))return Lt(e);var t=Ne(e),r=[];for(var i in e)("constructor"!=i||!t&&mt.call(e,i))&&r.push(i);return r};var kt=function(e){return Ke(e)?wt(e,!0):xt(e)};var jt=function(e){return dt(e,kt(e))};var Ot=function(e,t,r,i,n,o,a){var s=ft(e,r),u=ft(t,r),l=a.get(u);if(l)Fe(e,r,l);else{var c=o?o(s,u,r+"",e,t,a):void 0,f=void 0===c;if(f){var p=Je(u),h=!p&&et(u),d=!p&&!h&&ct(u);c=u,p||h||d?Je(s)?c=s:Qe(s)?c=Be(s):h?(f=!1,c=Ce(u,!0)):d?(f=!1,c=Me(u,!0)):c=[]:nt(u)||Ze(u)?(c=s,Ze(s)?c=jt(s):q(s)&&!J(s)||(c=Ie(u))):f=!1}f&&(a.set(u,c),n(c,u,i,o,a),a.delete(u)),Fe(e,r,c)}};var _t=function e(t,r,i,n,o){t!==r&&Se(r,(function(a,s){if(o||(o=new _e),q(a))Ot(t,r,s,i,e,n,o);else{var u=n?n(ft(t,s),a,s+"",t,r,o):void 0;void 0===u&&(u=a),Fe(t,s,u)}}),kt)};var Dt=function(e){return e};var Pt=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},Ft=Math.max;var St=function(e,t,r){return t=Ft(void 0===t?e.length-1:t,0),function(){for(var i=arguments,n=-1,o=Ft(i.length-t,0),a=Array(o);++n<o;)a[n]=i[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=i[n];return s[t]=r(a),Pt(e,this,s)}};var Ct=function(e){return function(){return e}},At=Date.now;var Vt=function(e){var t=0,r=0;return function(){var i=At(),n=16-(i-r);if(r=i,n>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},Mt=Vt(De?function(e,t){return De(e,"toString",{configurable:!0,enumerable:!1,value:Ct(t),writable:!0})}:Dt);var Bt=function(e,t){return Mt(St(e,t,Dt),e+"")};var Rt=function(e,t,r){if(!q(r))return!1;var i=typeof t;return!!("number"==i?Ke(r)&&bt(t,r.length):"string"==i&&t in r)&&w(r[t],e)};var Tt=function(e){return Bt((function(t,r){var i=-1,n=r.length,o=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(n--,o):void 0,a&&Rt(r[0],r[1],a)&&(o=3>n?void 0:o,n=1),t=Object(t);++i<n;){var s=r[i];s&&e(t,s,i,o)}return t}))},Et=Tt((function(e,t,r){_t(e,t,r)})),zt=2,Nt={1:{world:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/35bb8365-1926-471c-b357-db2c02ff3a81.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/8ec671c3-a4f9-4fdf-8e88-85d2ab1d8930.bin"},label:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/90c51eb3-04d7-402f-bd05-95e4bd27dd62.bin",parser:{type:"geojson"}},nationalBoundaries:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/ee493a41-0558-4c0e-bee6-520276c4f1a8.json"}},country:{CHN:{1:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/380370e0-76aa-4240-8874-5732de77e71d.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/70ec087e-c48a-4b76-8825-6452f17bae7a.bin"},provinceLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/778ad7ba-5a3f-4ed6-a94a-b8ab8acae9d6.bin"},label:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/36832a45-68f8-4b51-b006-9dec71f92a23.json"}},2:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/feeb1f06-11c6-4495-84c9-f41ea6f77123.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/8bfbfe7e-bd0e-4bbe-84d8-629f4dc7abc4.bin"},cityLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/8bfbfe7e-bd0e-4bbe-84d8-629f4dc7abc4.bin"},provinceLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/778ad7ba-5a3f-4ed6-a94a-b8ab8acae9d6.bin"}},3:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/24a9ee83-2be1-4fc1-b187-769ac939269d.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/bc97875a-90f2-42c0-a62c-43d2efd7460d.bin"},countryLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/bc97875a-90f2-42c0-a62c-43d2efd7460d.bin"},cityLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/8bfbfe7e-bd0e-4bbe-84d8-629f4dc7abc4.bin"},provinceLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/778ad7ba-5a3f-4ed6-a94a-b8ab8acae9d6.bin"}},nationalBoundaries:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/ee493a41-0558-4c0e-bee6-520276c4f1a8.json"},nationalBoundaries2:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/f2189cc4-662b-4358-8573-36f0f918b7ca.json"},island:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/fe49b393-1147-4769-94ed-70471f4ff15d.json"}}},province:{11e4:""}},2:{world:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/ad26cd25-96ea-40fd-935d-7e21a5c08893.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/62f61f5f-cca7-4137-845d-13c8f9969664.bin"},label:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/90c51eb3-04d7-402f-bd05-95e4bd27dd62.bin",parser:{type:"geojson"}},nationalBoundaries:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/ee493a41-0558-4c0e-bee6-520276c4f1a8.json"}},country:{CHN:{1:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/71ac4de3-bb14-449d-a97d-2b98e25ec8df.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/70ec087e-c48a-4b76-8825-6452f17bae7a.bin"},provinceLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/0024caaf-86b2-4e75-a3d1-6d2146490b67.bin"},label:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/36832a45-68f8-4b51-b006-9dec71f92a23.json"}},2:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/522c6496-c711-4581-88db-c3741cd39abd.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/f6a4e2b1-359b-43a6-921c-39d2088d1dab.bin"},cityLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/f6a4e2b1-359b-43a6-921c-39d2088d1dab.bin"},provinceLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/0024caaf-86b2-4e75-a3d1-6d2146490b67.bin"}},3:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/524f7de2-7d69-4fa7-8da3-7ff42fa69ee4.bin"},countryLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/bc97875a-90f2-42c0-a62c-43d2efd7460d.bin"},cityLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/8bfbfe7e-bd0e-4bbe-84d8-629f4dc7abc4.bin"},provinceLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/778ad7ba-5a3f-4ed6-a94a-b8ab8acae9d6.bin"}},nationalBoundaries:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/ee493a41-0558-4c0e-bee6-520276c4f1a8.json"},nationalBoundaries2:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/f2189cc4-662b-4358-8573-36f0f918b7ca.json"},island:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/fe49b393-1147-4769-94ed-70471f4ff15d.json"}}}}};function It(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt;return Nt[e]}function Ut(e){zt=e}var Wt,Ht,Gt,$t,qt,Zt=Nt[zt],Jt=V((function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,i,o,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new n(i,o||e,a),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=this._events[r?r+e:e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,n=t.length,o=Array(n);n>i;i++)o[i]=t[i].fn;return o},s.prototype.listenerCount=function(e){var t=this._events[r?r+e:e];return t?t.fn?1:t.length:0},s.prototype.emit=function(e,t,i,n,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,n),!0;case 5:return c.fn.call(c.context,t,i,n,o),!0;case 6:return c.fn.call(c.context,t,i,n,o,a),!0}for(l=1,u=Array(f-1);f>l;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var p,h=c.length;for(l=0;h>l;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,i);break;case 4:c[l].fn.call(c[l].context,t,i,n);break;default:if(!u)for(p=1,u=Array(f-1);f>p;p++)u[p-1]=arguments[p];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,i,n){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||n&&!s.once||i&&s.context!==i||a(this,o);else{for(var u=0,l=[],c=s.length;c>u;u++)(s[u].fn!==t||n&&!s[u].once||i&&s[u].context!==i)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?this._events[t=r?r+e:e]&&a(this,t):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})),Yt=Jt.EventEmitter,Kt=function(e,t){Wt={},Gt=[],Ht=0,$t=0,qt=1,er(e);for(var r=Math.ceil(Math.log(qt=Math.min(qt,Qt))/Math.LN10),i=0;Gt.length>i;i++)t.writeStringField(1,Gt[i]);2!==$t&&t.writeVarintField(2,$t);6!==r&&t.writeVarintField(3,r);"FeatureCollection"===e.type?t.writeMessage(4,or,e):"Feature"===e.type?t.writeMessage(5,ar,e):t.writeMessage(6,sr,e);return Wt=null,t.finish()},Qt=1e6,Xt={Point:0,MultiPoint:1,LineString:2,MultiLineString:3,Polygon:4,MultiPolygon:5,GeometryCollection:6};function er(e){var t,r;if("FeatureCollection"===e.type)for(t=0;e.features.length>t;t++)er(e.features[t]);else if("Feature"===e.type)for(r in null!==e.geometry&&er(e.geometry),e.properties)nr(r);else if("Point"===e.type)ir(e.coordinates);else if("MultiPoint"===e.type)rr(e.coordinates);else if("GeometryCollection"===e.type)for(t=0;e.geometries.length>t;t++)er(e.geometries[t]);else if("LineString"===e.type)rr(e.coordinates);else if("Polygon"===e.type||"MultiLineString"===e.type)tr(e.coordinates);else if("MultiPolygon"===e.type)for(t=0;e.coordinates.length>t;t++)tr(e.coordinates[t]);for(r in e)hr(r,e.type)||nr(r)}function tr(e){for(var t=0;e.length>t;t++)rr(e[t])}function rr(e){for(var t=0;e.length>t;t++)ir(e[t])}function ir(e){$t=Math.max($t,e.length);for(var t=0;e.length>t;t++)for(;Math.round(e[t]*qt)/qt!==e[t]&&Qt>qt;)qt*=10}function nr(e){void 0===Wt[e]&&(Gt.push(e),Wt[e]=Ht++)}function or(e,t){for(var r=0;e.features.length>r;r++)t.writeMessage(1,ar,e.features[r]);ur(e,t,!0)}function ar(e,t){null!==e.geometry&&t.writeMessage(1,sr,e.geometry),void 0!==e.id&&("number"==typeof e.id&&e.id%1==0?t.writeSVarintField(12,e.id):t.writeStringField(11,e.id)),e.properties&&ur(e.properties,t),ur(e,t,!0)}function sr(e,t){t.writeVarintField(1,Xt[e.type]);var r=e.coordinates;if("Point"===e.type)!function(e,t){for(var r=[],i=0;$t>i;i++)r.push(Math.round(e[i]*qt));t.writePackedSVarint(3,r)}(r,t);else if("MultiPoint"===e.type)cr(r,t);else if("LineString"===e.type)cr(r,t);else if("MultiLineString"===e.type)fr(r,t);else if("Polygon"===e.type)fr(r,t,!0);else if("MultiPolygon"===e.type)!function(e,t){var r,i,n=e.length;if(1!==n||1!==e[0].length){var o=[n];for(r=0;n>r;r++)for(o.push(e[r].length),i=0;e[r].length>i;i++)o.push(e[r][i].length-1);t.writePackedVarint(2,o)}var a=[];for(r=0;n>r;r++)for(i=0;e[r].length>i;i++)pr(a,e[r][i],!0);t.writePackedSVarint(3,a)}(r,t);else if("GeometryCollection"===e.type)for(var i=0;e.geometries.length>i;i++)t.writeMessage(4,sr,e.geometries[i]);ur(e,t,!0)}function ur(e,t,r){var i=[],n=0;for(var o in e)r&&hr(o,e.type)||(t.writeMessage(13,lr,e[o]),i.push(Wt[o]),i.push(n++));t.writePackedVarint(r?15:14,i)}function lr(e,t){if(null!==e){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(5,e):"object"===r?t.writeStringField(6,JSON.stringify(e)):"number"===r&&(e%1!=0?t.writeDoubleField(2,e):0>e?t.writeVarintField(4,-e):t.writeVarintField(3,e))}}function cr(e,t){var r=[];pr(r,e),t.writePackedSVarint(3,r)}function fr(e,t,r){var i,n=e.length;if(1!==n){var o=[];for(i=0;n>i;i++)o.push(e[i].length-(r?1:0));t.writePackedVarint(2,o)}var a=[];for(i=0;n>i;i++)pr(a,e[i],r);t.writePackedSVarint(3,a)}function pr(e,t,r){var i,n,o=t.length-(r?1:0),a=Array($t);for(n=0;$t>n;n++)a[n]=0;for(i=0;o>i;i++)for(n=0;$t>n;n++){var s=Math.round(t[i][n]*qt)-a[n];e.push(s),a[n]+=s}}function hr(e,t){if("type"===e)return!0;if("FeatureCollection"===t){if("features"===e)return!0}else if("Feature"===t){if("id"===e||"properties"===e||"geometry"===e)return!0}else if("GeometryCollection"===t){if("geometries"===e)return!0}else if("coordinates"===e)return!0;return!1}var dr,yr,vr,br,gr,wr=function(e){br=2,gr=1e6,vr=null,dr=[],yr=[];var t=e.readFields(mr,{});return dr=null,t},Lr=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection"];function mr(e,t,r){1===e?dr.push(r.readString()):2===e?br=r.readVarint():3===e?gr=Math.pow(10,r.readVarint()):4===e?function(e,t){t.type="FeatureCollection",t.features=[],e.readMessage(jr,t)}(r,t):5===e?xr(r,t):6===e&&kr(r,t)}function xr(e,t){t.type="Feature";var r=e.readMessage(Or,t);return"geometry"in r||(r.geometry=null),r}function kr(e,t){return t.type="Point",e.readMessage(_r,t)}function jr(e,t,r){1===e?t.features.push(xr(r,{})):13===e?yr.push(Dr(r)):15===e&&Pr(r,t)}function Or(e,t,r){1===e?t.geometry=kr(r,{}):11===e?t.id=r.readString():12===e?t.id=r.readSVarint():13===e?yr.push(Dr(r)):14===e?t.properties=Pr(r,{}):15===e&&Pr(r,t)}function _r(e,t,r){1===e?t.type=Lr[r.readVarint()]:2===e?vr=r.readPackedVarint():3===e?function(e,t,r){"Point"===r?e.coordinates=function(e){var t=e.readVarint()+e.pos,r=[];for(;t>e.pos;)r.push(e.readSVarint()/gr);return r}(t):"MultiPoint"===r||"LineString"===r?e.coordinates=Sr(t):"MultiLineString"===r?e.coordinates=Cr(t):"Polygon"===r?e.coordinates=Cr(t,!0):"MultiPolygon"===r&&(e.coordinates=function(e){var t=e.readVarint()+e.pos;if(!vr)return[[Fr(e,t,null,!0)]];for(var r=[],i=1,n=0;vr[0]>n;n++){for(var o=[],a=0;vr[i]>a;a++)o.push(Fr(e,t,vr[i+1+a],!0));i+=vr[i]+1,r.push(o)}return vr=null,r}(t))}(t,r,t.type):4===e?(t.geometries=t.geometries||[],t.geometries.push(kr(r,{}))):13===e?yr.push(Dr(r)):15===e&&Pr(r,t)}function Dr(e){for(var t=e.readVarint()+e.pos,r=null;t>e.pos;){var i=e.readVarint()>>3;1===i?r=e.readString():2===i?r=e.readDouble():3===i?r=e.readVarint():4===i?r=-e.readVarint():5===i?r=e.readBoolean():6===i&&(r=JSON.parse(e.readString()))}return r}function Pr(e,t){for(var r=e.readVarint()+e.pos;r>e.pos;)t[dr[e.readVarint()]]=yr[e.readVarint()];return yr=[],t}function Fr(e,t,r,i){var n,o,a=0,s=[],u=[];for(o=0;br>o;o++)u[o]=0;for(;r?r>a:t>e.pos;){for(n=[],o=0;br>o;o++)u[o]+=e.readSVarint(),n[o]=u[o]/gr;s.push(n),a++}return i&&s.push(s[0]),s}function Sr(e){return Fr(e,e.readVarint()+e.pos)}function Cr(e,t){var r=e.readVarint()+e.pos;if(!vr)return[Fr(e,r,null,t)];for(var i=[],n=0;vr.length>n;n++)i.push(Fr(e,r,vr[n],t));return vr=null,i}var Ar={encode:Kt,decode:wr},Vr=Tt((function(e,t,r,i){_t(e,t,r,i)})),Mr=function(e,t,r,i,n){var o,a,s=8*n-i-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?n-1:0,p=r?-1:1,h=e[t+f];for(f+=p,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+e[t+f],f+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,i),o-=l}return(h?-1:1)*a*Math.pow(2,o-i)},Br=function(e,t,r,i,n,o){var a,s,u,l=8*o-n-1,c=(1<<l)-1,f=c>>1,p=23===n?5.960464477539062e-8:0,h=i?0:o-1,d=i?1:-1,y=0>t||0===t&&0>1/t?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(s=isNaN(t)?1:0,a=c):(1>t*(u=Math.pow(2,-(a=Math.floor(Math.log(t)/Math.LN2))))&&(a--,u*=2),2>(t+=1>a+f?p*Math.pow(2,1-f):p/u)*u||(a++,u/=2),c>a+f?1>a+f?(s=t*Math.pow(2,f-1)*Math.pow(2,n),a=0):(s=(t*u-1)*Math.pow(2,n),a+=f):(s=0,a=c));n>=8;e[r+h]=255&s,h+=d,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;e[r+h]=255&a,h+=d,a/=256,l-=8);e[r+h-d]|=128*y},Rr=Tr;function Tr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Tr.Varint=0,Tr.Fixed64=1,Tr.Bytes=2,Tr.Fixed32=5;var Er=4294967296,zr=1/Er,Nr="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ir(e){return e.type===Tr.Bytes?e.readVarint()+e.pos:e.pos+1}function Ur(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Wr(e,t,r){var i=t>16383?t>2097151?t>268435455?Math.floor(Math.log(t)/(7*Math.LN2)):3:2:1;r.realloc(i);for(var n=r.pos-1;n>=e;n--)r.buf[n+i]=r.buf[n]}function Hr(e,t){for(var r=0;e.length>r;r++)t.writeVarint(e[r])}function Gr(e,t){for(var r=0;e.length>r;r++)t.writeSVarint(e[r])}function $r(e,t){for(var r=0;e.length>r;r++)t.writeFloat(e[r])}function qr(e,t){for(var r=0;e.length>r;r++)t.writeDouble(e[r])}function Zr(e,t){for(var r=0;e.length>r;r++)t.writeBoolean(e[r])}function Jr(e,t){for(var r=0;e.length>r;r++)t.writeFixed32(e[r])}function Yr(e,t){for(var r=0;e.length>r;r++)t.writeSFixed32(e[r])}function Kr(e,t){for(var r=0;e.length>r;r++)t.writeFixed64(e[r])}function Qr(e,t){for(var r=0;e.length>r;r++)t.writeSFixed64(e[r])}function Xr(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function ei(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function ti(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Tr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;r>this.pos;){var i=this.readVarint(),n=i>>3,o=this.pos;this.type=7&i,e(n,t,this),this.pos===o&&this.skip(i)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Xr(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ti(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Xr(this.buf,this.pos)+Xr(this.buf,this.pos+4)*Er;return this.pos+=8,e},readSFixed64:function(){var e=Xr(this.buf,this.pos)+ti(this.buf,this.pos+4)*Er;return this.pos+=8,e},readFloat:function(){var e=Mr(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Mr(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,i=this.buf;return t=127&(r=i[this.pos++]),128>r?t:(t|=(127&(r=i[this.pos++]))<<7,128>r?t:(t|=(127&(r=i[this.pos++]))<<14,128>r?t:(t|=(127&(r=i[this.pos++]))<<21,128>r?t:function(e,t,r){var i,n,o=r.buf;if(n=o[r.pos++],i=(112&n)>>4,128>n)return Ur(e,i,t);if(n=o[r.pos++],i|=(127&n)<<3,128>n)return Ur(e,i,t);if(n=o[r.pos++],i|=(127&n)<<10,128>n)return Ur(e,i,t);if(n=o[r.pos++],i|=(127&n)<<17,128>n)return Ur(e,i,t);if(n=o[r.pos++],i|=(127&n)<<24,128>n)return Ur(e,i,t);if(n=o[r.pos++],i|=(1&n)<<31,128>n)return Ur(e,i,t);throw Error("Expected varint not more than 10 bytes")}(t|=(15&(r=i[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Nr?function(e,t,r){return Nr.decode(e.subarray(t,r))}(this.buf,t,e):function(e,t,r){var i="",n=t;for(;r>n;){var o,a,s,u=e[n],l=null,c=u>239?4:u>223?3:u>191?2:1;if(n+c>r)break;1===c?128>u&&(l=u):2===c?128==(192&(o=e[n+1]))&&((l=(31&u)<<6|63&o)>127||(l=null)):3===c?(a=e[n+2],128==(192&(o=e[n+1]))&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(55296>l||l>57343)||(l=null))):4===c&&(a=e[n+2],s=e[n+3],128==(192&(o=e[n+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&1114112>l||(l=null))),null===l?(l=65533,c=1):l>65535&&(i+=String.fromCharCode((l-=65536)>>>10&1023|55296),l=56320|1023&l),i+=String.fromCharCode(l),n+=c}return i}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Tr.Bytes)return e.push(this.readVarint(t));var r=Ir(this);for(e=e||[];r>this.pos;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Tr.Bytes)return e.push(this.readSVarint());var t=Ir(this);for(e=e||[];t>this.pos;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Tr.Bytes)return e.push(this.readBoolean());var t=Ir(this);for(e=e||[];t>this.pos;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Tr.Bytes)return e.push(this.readFloat());var t=Ir(this);for(e=e||[];t>this.pos;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Tr.Bytes)return e.push(this.readDouble());var t=Ir(this);for(e=e||[];t>this.pos;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Tr.Bytes)return e.push(this.readFixed32());var t=Ir(this);for(e=e||[];t>this.pos;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Tr.Bytes)return e.push(this.readSFixed32());var t=Ir(this);for(e=e||[];t>this.pos;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Tr.Bytes)return e.push(this.readFixed64());var t=Ir(this);for(e=e||[];t>this.pos;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Tr.Bytes)return e.push(this.readSFixed64());var t=Ir(this);for(e=e||[];t>this.pos;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Tr.Varint)for(;this.buf[this.pos++]>127;);else if(t===Tr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Tr.Fixed32)this.pos+=4;else{if(t!==Tr.Fixed64)throw Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;this.pos+e>t;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),ei(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),ei(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),ei(this.buf,-1&e,this.pos),ei(this.buf,Math.floor(e*zr),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),ei(this.buf,-1&e,this.pos),ei(this.buf,Math.floor(e*zr),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||0>e?function(e,t){var r,i;0>e?(i=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,i=i+1|0)):(r=e%4294967296|0,i=e/4294967296|0);if(e>=0x10000000000000000||-0x10000000000000000>e)throw Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,r.buf[r.pos]=127&(e>>>=7)}(r,0,t),function(e,t){var r=(7&e)<<4;if(t.buf[t.pos++]|=r|((e>>>=3)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;t.buf[t.pos++]=127&e}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e>127&&(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e>127&&(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e>127&&(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(0>e?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){this.realloc(4*(e+="").length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var i,n,o=0;t.length>o;o++){if((i=t.charCodeAt(o))>55295&&57344>i){if(!n){i>56319||o+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):n=i;continue}if(56320>i){e[r++]=239,e[r++]=191,e[r++]=189,n=i;continue}i=n-55296<<10|i-56320|65536,n=null}else n&&(e[r++]=239,e[r++]=191,e[r++]=189,n=null);128>i?e[r++]=i:(2048>i?e[r++]=i>>6|192:(65536>i?e[r++]=i>>12|224:(e[r++]=i>>18|240,e[r++]=i>>12&63|128),e[r++]=i>>6&63|128),e[r++]=63&i|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;128>r||Wr(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),Br(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Br(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;t>r;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var i=this.pos-r;128>i||Wr(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(e,t,r){this.writeTag(e,Tr.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Hr,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Gr,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Zr,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,$r,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,qr,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Jr,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Yr,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Kr,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Qr,t)},writeBytesField:function(e,t){this.writeTag(e,Tr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Tr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Tr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Tr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Tr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Tr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Tr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Tr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Tr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Tr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};var ri=function(e,t){this.p1=e,this.p2=t};ri.prototype.rise=function(){return this.p2[1]-this.p1[1]},ri.prototype.run=function(){return this.p2[0]-this.p1[0]},ri.prototype.slope=function(){return this.rise()/this.run()},ri.prototype.yIntercept=function(){return this.p1[1]-this.p1[0]*this.slope(this.p1,this.p2)},ri.prototype.isVertical=function(){return!isFinite(this.slope())},ri.prototype.isHorizontal=function(){return this.p1[1]==this.p2[1]},ri.prototype._perpendicularDistanceHorizontal=function(e){return Math.abs(this.p1[1]-e[1])},ri.prototype._perpendicularDistanceVertical=function(e){return Math.abs(this.p1[0]-e[0])},ri.prototype._perpendicularDistanceHasSlope=function(e){var t=this.slope(),r=this.yIntercept();return Math.abs(t*e[0]-e[1]+r)/Math.sqrt(Math.pow(t,2)+1)},ri.prototype.perpendicularDistance=function(e){return this.isVertical()?this._perpendicularDistanceVertical(e):this.isHorizontal()?this._perpendicularDistanceHorizontal(e):this._perpendicularDistanceHasSlope(e)};var ii=ri,ni=function(e,t){for(var r=0,i=0,n=1;e.length-2>=n;n++){var o=new ii(e[0],e[e.length-1]).perpendicularDistance(e[n]);o>r&&(i=n,r=o)}if(r>t)var a=ni(e.slice(0,i),t),s=ni(e.slice(i,e.length),t),u=a.concat(s);else u=e.length>1?[e[0],e[e.length-1]]:[e[0]];return u},oi=ni,ai=V((function(e){function t(t,r){var i=t.geometry,n=i.type;if("LineString"===n)i.coordinates=e.exports.simplify(i.coordinates,r);else if("Polygon"===n||"MultiLineString"===n)for(var o=0;i.coordinates.length>o;o++)i.coordinates[o]=e.exports.simplify(i.coordinates[o],r);else if("MultiPolygon"===n)for(var a=0;i.coordinates.length>a;a++)for(var s=0;i.coordinates[a].length>s;s++)i.coordinates[a][s]=e.exports.simplify(i.coordinates[a][s],r);return t}e.exports=function(e,r,i){return i||(e=JSON.parse(JSON.stringify(e))),e.features?function(e,r){for(var i=0;e.features.length>i;i++)e.features[i]=t(e.features[i],r);return e}(e,r):e.type&&"Feature"===e.type?t(e,r):Error("FeatureCollection or individual Feature required")},e.exports.simplify=function(e,t){return oi(e,t)}})),si=["loaded"];function ui(e,t){if(Array.isArray(t))return t}var li=function(e){c(s,e);var r,n=d(s);function s(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,s),(t=n.call(this)).fillLayer=void 0,t.lineLayer=void 0,t.labelLayer=void 0,t.bubbleLayer=void 0,t.loaded=!1,t.scene=void 0,t.options=void 0,t.layers=[],t.fillData=void 0,t.layerType=void 0,t.popup=void 0,t.scene=e,t.options=Vr(t.getDefaultOption(),r,ui),Ut(t.options.geoDataLevel),t}return u(s,[{key:"destroy",value:function(){var e=this;this.layers.forEach((function(t){return e.scene.removeLayer(t)})),this.layers.length=0}},{key:"show",value:function(){this.layers.forEach((function(e){return e.show()}))}},{key:"hide",value:function(){this.layers.forEach((function(e){return e.hide()}))}},{key:"setOption",value:function(e){this.options=Vr(this.options,e,ui)}},{key:"getFillData",value:function(){return this.fillData}},{key:"getOptions",value:function(){return this.options}},{key:"getLayer",value:function(e){return this[e+"Layer"]}},{key:"on",value:function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fill";return-1!==si.indexOf(e)?v(f(s.prototype),"on",this).call(this,e,t):this.loaded&&this.getLayer(i)?this.getLayer(i).on(e,t):v(f(s.prototype),"once",this).call(this,"loaded",(function(){r.getLayer(i).on(e,t)})),this}},{key:"off",value:function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fill";return-1!==si.indexOf(e)?v(f(s.prototype),"on",this).call(this,e,t):this.getLayer(i)&&(this.loaded&&this.getLayer(i)?this.getLayer(i).off(e,t):v(f(s.prototype),"once",this).call(this,"loaded",(function(){r.getLayer(i).off(e,t)}))),this}},{key:"updateData",value:function(e,t){var r;this.setOption({data:e,joinBy:t});var n=this.options,o=n.data,a=void 0===o?[]:o,s=n.joinBy;if(this.fillLayer.setData(this.fillData,{transforms:0===a.length?[]:[{type:"join",sourceField:s[1],targetField:s[0],data:a}]}),this.options.bubble&&!1!==(null===(r=this.options.bubble)||void 0===r?void 0:r.enable)){var u={};a.forEach((function(e){u[e[s[1]]]=e}));var l=this.fillData.features.map((function(e){return i(i({},e.properties),{},{center:[e.properties.x,e.properties.y]})})).filter((function(e){return u[e[s[0]]]}));this.bubbleLayer.setData(l,{transforms:0===a.length?[]:[{type:"join",sourceField:s[1],targetField:s[0],data:a}]})}}},{key:"fetchData",value:(r=o(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("pbf"!==t.type){e.next=11;break}return e.next=3,fetch(t.url);case 3:return e.next=5,e.sent.arrayBuffer();case 5:return r=Ar.decode(new Rr(e.sent)),!1!==this.options.simplifyTolerance&&(r=ai(r,this.options.simplifyTolerance||.8)),e.abrupt("return",r);case 11:if(!q(t.url)){e.next=15;break}e.t0=t.url,e.next=18;break;case 15:return e.next=17,fetch(t.url);case 17:e.t0=e.sent.json();case 18:return e.abrupt("return",e.t0);case 19:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getDefaultOption",value:function(){return{zIndex:0,visible:!0,viewType:"normal",enablePropagation:!0,geoDataLevel:2,regionType:"province",depth:1,adcode:[],joinBy:["name","name"],simplifyTolerance:!1,label:{enable:!0,color:"#000",field:"name",size:10,stroke:"#fff",strokeWidth:2,textAllowOverlap:!0,opacity:1,textOffset:[0,0],padding:[5,5]},bubble:{enable:!1,shape:"circle",color:"#1AA9FF",size:15,style:{opacity:1,stroke:"#fff",strokeWidth:1}},fill:{scale:null,color:"#ddd",style:{opacity:1},activeColor:!1},autoFit:!0,showBorder:!0,strokeOpacity:1,stroke:"#bdbdbd",strokeVisible:!0,strokeWidth:.6,cityStroke:"#636363",cityStrokeWidth:.6,countyStrokeWidth:.6,provinceStrokeWidth:.6,provinceStroke:"#f0f0f0",provinceStrokeVisible:!0,countyStroke:"#525252",coastlineStroke:"#4190da",coastlineWidth:.6,nationalStroke:"#c994c7",nationalWidth:.5,chinaNationalStroke:"gray",chinaNationalWidth:1,popup:{enable:!0,openTriggerEvent:"mousemove",closeTriggerEvent:"mouseout",option:{},Html:function(e){return"".concat(e.name)}}}}},{key:"addFillLayer",value:function(e){var r,n=this,o=this.options,a=o.data,s=void 0===a?[]:a,u=o.fill,l=o.autoFit,c=o.joinBy,f=o.visible,p=o.enablePropagation,h=o.zIndex;this.fillData=e;var d,y=new t.PolygonLayer({autoFit:l,visible:f,enablePropagation:p,zIndex:h}).source(e,{transforms:0===s.length?[]:[{type:"join",sourceField:c[1],targetField:c[0],data:s}]});(this.setLayerAttribute(y,"color",u.color),this.setLayerAttribute(y,"filter",u.filter),u.scale&&q(u.color))&&y.scale("color",{type:u.scale,field:null==u||null===(d=u.color)||void 0===d?void 0:d.field});if(y.shape("fill").style(u.style),u.activeColor&&y.active({color:u.activeColor}),this.fillLayer=y,this.layers.push(y),this.scene.addLayer(y),this.options.onClick&&this.fillLayer.on("click",(function(e){n.options&&n.options.onClick&&n.options.onClick(e,n.layerType)})),this.options.bubble&&!1!==(null===(r=this.options.bubble)||void 0===r?void 0:r.enable)){var v=e.features.map((function(e){return i(i({},e.properties),{},{center:[e.properties.x,e.properties.y]})}));this.addBubbleLayer(v)}this.addPopup()}},{key:"updateLayerAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fill",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=this.getLayer(e);this.setLayerAttribute(i,t,r)}},{key:"enablePopup",value:function(){this.setOption({popup:i(i({},this.options.popup),{},{enable:!0})})}},{key:"disablePopup",value:function(){this.setOption({popup:i(i({},this.options.popup),{},{enable:!1})})}},{key:"addFillLine",value:function(e){var r=this.options,i=r.stroke,n=r.strokeWidth,o=r.strokeOpacity,a=new t.LineLayer({zIndex:r.zIndex+.1,visible:r.visible}).source(e).color(i).size(n).style({opacity:o});this.scene.addLayer(a),this.layers.push(a),this.lineLayer=a}},{key:"addLabelLayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",r=this.addLabel(e,t);this.scene.addLayer(r),this.layers.push(r),this.labelLayer=r}},{key:"addBubbleLayer",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",i=this.options,n=i.bubble,o=i.zIndex,a=i.data,s=void 0===a?[]:a,u=i.joinBy,l=i.visible,c=new t.PointLayer({zIndex:o+.3,visible:l}).source(e,{parser:{type:r,coordinates:"center"},transforms:0===s.length?[]:[{type:"join",sourceField:u[1],targetField:u[0],data:s}]});return this.setLayerAttribute(c,"color",n.color),this.setLayerAttribute(c,"size",n.size),this.setLayerAttribute(c,"shape",n.shape),this.setLayerAttribute(c,"filter",n.filter),n.scale&&c.scale(n.scale.field,{type:n.scale.type}),c.style(n.style),this.scene.addLayer(c),this.layers.push(c),this.bubbleLayer=c,c}},{key:"addLabel",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",i=this.options,n=i.label,o=i.zIndex,a=i.visible,s=new t.PointLayer({zIndex:o+5,visible:a}).source(e,{parser:{type:r,coordinates:"center"}}).shape(n.field,"text").style(n);return this.setLayerAttribute(s,"color",n.color),this.setLayerAttribute(s,"size",n.size),this.setLayerAttribute(s,"filter",n.filter),s}},{key:"addPopup",value:function(){var e,r=this,n=this.options.popup;(e=n.triggerLayer?"bubble"===n.triggerLayer?this.bubbleLayer:this.fillLayer:this.options.bubble.enable?this.bubbleLayer:this.fillLayer).on(n.openTriggerEvent,(function(e){if(n.enable){var o=n.Html?n.Html(e.feature.properties?e.feature.properties:e.feature):"";r.popup=new t.Popup(i({closeButton:!1},n.option)).setLnglat(e.lngLat).setHTML(o),r.scene.addPopup(r.popup)}})),e.on(n.closeTriggerEvent,(function(e){r.popup&&r.popup.remove()}))}},{key:"setLayerAttribute",value:function(e,t,r){r&&(q(r)?e[t](r.field,r.values):e[t](r))}}]),s}(Yt),ci=function(e){c(n,e);var t,r=d(n);function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,n),(t=r.call(this,e,i)).fillRawData=void 0,t.lineRawData=void 0,t.labelRawData=void 0,t.layerType="Province",t.addProvinceFillLayer(),t}return u(n,[{key:"updateDistrict",value:function(e,t,r){if(e||!Array.isArray(e)||0!==e.length){var i=this.options,n=i.label,o=i.showBorder;this.setOption({adcode:e});var a=this.filterData(this.fillRawData,e),s=this.filterData(this.lineRawData,e),u=this.filterLabelData(this.labelRawData,e);this.fillData=a,this.updateData(t,r),o&&this.lineLayer.setData(s),n.enable&&this.labelLayer&&this.labelLayer.setData(u),this.show()}else this.hide()}},{key:"getDefaultOption",value:function(){var e=v(f(n.prototype),"getDefaultOption",this).call(this);return Et({},e,{adcode:["110000"],depth:2,label:{field:"NAME_CHN",textAllowOverlap:!1},popup:{enable:!0,Html:function(e){return"<span>".concat(e.NAME_CHN,"</span>")}}})}},{key:"filterData",value:function(e,t){var r=Array.isArray(t)?t:[t],i=e.features.filter((function(e){var t=e.properties,i=t.adcode_pro,n=t.adcode;return-1!==r.indexOf(i)||-1!==r.indexOf(n)||-1!==r.indexOf(""+i)||-1!==r.indexOf(""+n)}));return{type:"FeatureCollection",features:i}}},{key:"filterLabelData",value:function(e,t){var r=Array.isArray(t)?t:[t],i=e.filter((function(e){var t=e.adcode_pro,i=e.adcode;return-1!==r.indexOf(t)||-1!==r.indexOf(i)||-1!==r.indexOf(""+t)||-1!==r.indexOf(""+i)}));return i}},{key:"addProvinceFillLayer",value:(t=o(regeneratorRuntime.mark((function e(){var t,r,n,o,a,s,u,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=this.options).depth,n=t.adcode,o=t.label,a=t.showBorder,s=It(this.options.geoDataLevel).country.CHN[r],e.next=4,this.fetchData(s.fill);case 4:this.labelRawData=(u=e.sent).features.map((function(e){return i(i({},e.properties),{},{center:[e.properties.x,e.properties.y]})})),l=this.filterData(u,n),this.fillData=l,c=this.filterLabelData(this.labelRawData,n),this.fillRawData=u,this.addFillLayer(l),o.enable&&this.addLabelLayer(c),this.lineRawData=u,a&&this.addFillLine(l),this.emit("loaded"),this.loaded=!0;case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(li),fi=function(e){c(r,e);var t=d(r);function r(){var e;a(this,r);for(var i=arguments.length,n=Array(i),o=0;i>o;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).layerType="City",e}return u(r,[{key:"getDefaultOption",value:function(){var e=v(f(r.prototype),"getDefaultOption",this).call(this);return Et({},e,{adcode:["110000"],depth:3})}},{key:"filterData",value:function(e,t){var r=Array.isArray(t)?t:[t],i=e.features.filter((function(e){var t=e.properties,i=t.adcode_cit,n=t.adcode;return-1!==r.indexOf(i)||-1!==r.indexOf(""+i)||-1!==r.indexOf(n)||-1!==r.indexOf(""+n)}));return{type:"FeatureCollection",features:i}}},{key:"filterLabelData",value:function(e,t){var r=Array.isArray(t)?t:[t],i=e.filter((function(e){var t=e.adcode_cit,i=e.adcode;return-1!==r.indexOf(t)||-1!==r.indexOf(""+t)||-1!==r.indexOf(i)||-1!==r.indexOf(""+i)}));return i}}]),r}(ci),pi=["Country","Region","Province","City","County"],hi={100:{name:"",code:"100",child:[11e4,12e4,13e4,15e4,21e4,22e4,23e4,37e4],center:[118.740234375,42.87596410238256]},101:{name:"",code:"101",child:[32e4,34e4,31e4],center:[118.564453125,31.765537409484374]},102:{name:"",code:"102",child:[44e4,45e4,46e4],center:[110.709228515625,22.238259929564308]},103:{name:"",code:"103",child:[5e5,51e4,52e4,53e4],center:[90.263671875,36.73888412439431]},104:{name:"",code:"104",child:[33e4,35e4,36e4,42e4,43e4],center:[118.05908203124999,28.38173504322308]},301:{name:"",code:"301",child:[14e4,41e4,54e4,61e4,62e4,63e4,64e4,65e4],center:[109.1162109375,35.209721645221386]},701:{name:"",code:"701",child:[71e4,81e4,82e4]}},di=function(e){c(b,e);var r,n,s,l,f,p,h,y,v=d(b);function b(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,b),(t=v.call(this,e,r)).layerType="Country",t.fillRawData=void 0,t.init(),t}return u(b,[{key:"init",value:(y=o(regeneratorRuntime.mark((function e(){var t,r,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=this.options).depth,i=t.showBorder,e.next=3,this.addProvinceFill();case 3:return e.next=5,this.addProvinceLabel();case 5:if(n=It(this.options.geoDataLevel).country.CHN[r],!i){e.next=15;break}return e.next=9,this.addProvinceLine(n.provinceLine);case 9:if(2!==r){e.next=12;break}return e.next=12,this.addCityBorder(n.fill);case 12:if(3!==r){e.next=15;break}return e.next=15,this.addCountyBorder(n.fill);case 15:this.emit("loaded"),this.loaded=!0;case 17:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"addProvinceFill",value:(h=o(regeneratorRuntime.mark((function e(){var t,r,i,n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=this.options).depth,i=t.adcode,n=It(this.options.geoDataLevel).country.CHN[r],e.next=4,this.fetchData(n.fill);case 4:this.fillRawData=o=e.sent,a=o,i&&Array.isArray(i)&&0!==i.length&&(a=this.filterData(o,i)),this.fillData=a,this.addFillLayer(a);case 10:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"addProvinceLabel",value:(p=o(regeneratorRuntime.mark((function e(){var t,r,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.options.depth,!(i=It(this.options.geoDataLevel).country.CHN[r]).label){e.next=8;break}return e.next=5,this.fetchData(i.label);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=null;case 9:(n=e.t0)&&(null===(t=this.options.label)||void 0===t?void 0:t.enable)&&("standard"===this.getOptions().viewType?(this.addLabelLayer(n.filter((function(e){return""!==e.name}))),this.addMCLabel()):this.addLabelLayer(n));case 11:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"addProvinceLine",value:(f=o(regeneratorRuntime.mark((function e(t){var r,i,n,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData(t);case 2:i=(r=e.sent).features.filter((function(e){return"1"===e.properties.type})),n=r.features.filter((function(e){return"4"===e.properties.type})),o={type:"FeatureCollection",features:i},a={type:"FeatureCollection",features:n},s=r.features.filter((function(e){var t=e.properties.type;return"1"!==t&&"4"!==t})),this.addNationBorder({type:"FeatureCollection",features:s},o,a);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"addNormalProvinceLine",value:(l=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"addNationBorder",value:(s=o(regeneratorRuntime.mark((function e(r,i,n){var o,a,s,u,l,c,f,p,h,d,y,v,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(o=this.options).provinceStroke,s=o.provinceStrokeWidth,u=o.chinaNationalStroke,l=o.chinaNationalWidth,c=o.coastlineStroke,f=o.coastlineWidth,p=o.showBorder,y=new t.LineLayer({zIndex:(d=o.zIndex)+.1,visible:(h=o.visible)&&p}).source(r).size("type",(function(e){return"3"===e?s:"2"===e?f:"0"===e?l:"#fff"})).shape("line").color("type",(function(e){return"3"===e?a:"2"===e?c:"0"===e?u:"#fff"})),v=new t.LineLayer({zIndex:d+.1,visible:h&&p}).source(i).size(l).shape("line").color(u).style({lineType:"dash",dashArray:[2,2]}),b=new t.LineLayer({zIndex:d+.1,visible:h&&p}).source(n).size(s).shape("line").color(a).style({lineType:"dash",dashArray:[4,2,2,2]}),this.scene.addLayer(y),this.scene.addLayer(v),this.scene.addLayer(b),this.layers.push(y,v,b);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return s.apply(this,arguments)})},{key:"addCityBorder",value:(n=o(regeneratorRuntime.mark((function e(r){var i,n,o,a,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData(r);case 2:i=e.sent,o=(n=this.options).cityStroke,a=n.cityStrokeWidth,s=n.strokeOpacity,u=new t.LineLayer({zIndex:2,visible:n.visible}).source(i).color(o).size(a).style({opacity:s}),this.scene.addLayer(u),this.layers.push(u);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"addCountyBorder",value:(r=o(regeneratorRuntime.mark((function e(r){var i,n,o,a,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData(r);case 2:i=e.sent,o=(n=this.options).countyStrokeWidth,a=n.countyStroke,s=n.strokeOpacity,u=new t.LineLayer({zIndex:2,visible:n.visible}).source(i).color(a).size(o).style({opacity:s}),this.scene.addLayer(u),this.layers.push(u);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"addMCLabel",value:function(){var e=[{name:"",center:[113.537747,22.187009]}],t=this.addText(e,{maxZoom:2.9},[-45,-10]),r=this.addText(e,{minZoom:3,maxZoom:4},[-35,-10]),i=this.addText(e,{minZoom:4.1},[0,0]);this.scene.addLayer(i),this.scene.addLayer(t),this.scene.addLayer(r),this.layers.push(i,t,r)}},{key:"filterData",value:function(e,t){var r=Array.isArray(t)?t:[t];return{type:"FeatureCollection",features:e.features.filter((function(e){var t=e.properties,i=t.REGION_CODE,n=t.adcode_pro;return-1!==r.indexOf("86")||-1!==r.indexOf(86)||-1!==r.indexOf(i)||-1!==r.indexOf(""+i)||-1!==r.indexOf(n)||-1!==r.indexOf(""+n)}))}}},{key:"addText",value:function(e,r,n){var o=this.options,a=o.label;return new t.PointLayer(i({zIndex:o.zIndex+.4,visible:o.visible},r)).source(e,{parser:{type:"json",coordinates:"center"}}).color(a.color).shape("name","text").size(a.size).style({opacity:a.opacity,stroke:a.stroke,strokeWidth:a.strokeWidth,textAllowOverlap:a.textAllowOverlap,textOffset:n})}},{key:"addRegionLabel",value:function(){Object.values(hi).map((function(e){return e}))}}]),b}(li),yi=function(e){c(r,e);var t=d(r);function r(){var e;a(this,r);for(var i=arguments.length,n=Array(i),o=0;i>o;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).layerType="County",e}return u(r,[{key:"getDefaultOption",value:function(){var e=v(f(r.prototype),"getDefaultOption",this).call(this);return Et({},e,{adcode:["110100"],depth:3})}},{key:"filterData",value:function(e,t){var r=Array.isArray(t)?t:[t];return{type:"FeatureCollection",features:e.features.filter((function(e){var t=e.properties.adcode;return-1!==r.indexOf(t)||-1!==r.indexOf(""+t)}))}}},{key:"filterLabelData",value:function(e,t){var r=Array.isArray(t)?t:[t];return e.filter((function(e){var t=e.adcode;return-1!==r.indexOf(t)||-1!==r.indexOf(""+t)}))}}]),r}(ci),vi=function(e){c(r,e);var t=d(r);function r(){var e;a(this,r);for(var i=arguments.length,n=Array(i),o=0;i>o;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).layerType="Region",e}return r}(ci);function bi(e,t){if(Array.isArray(t))return t}var gi=function(){function e(t,r){a(this,e),this.drillState=void 0,this.options=void 0,this.regionLayer=void 0,this.cityLayer=void 0,this.countyLayer=void 0,this.provinceLayer=void 0,this.scene=void 0,this.layers=[],this.drillList=void 0,this.options=Vr(this.getDefaultOption(),r,bi),this.drillState=this.options.viewStart,this.scene=t,this.drillList=this.getViewList(),this.initLayers(t),this.initLayerEvent(),this.scene.setMapStatus({doubleClickZoom:!1})}return u(e,[{key:"getDefaultOption",value:function(){return{drillDepth:2,drillStart:1,customTrigger:!1,autoUpdateData:!0,regionDrill:!1,drillDownTriggerEvent:"click",drillUpTriggerEvent:"undblclick",provinceData:[],viewStart:"Country",viewEnd:"County",cityData:[],countyData:[],city:{adcode:[],depth:2},region:{adcode:[],depth:1},county:{adcode:[]}}}},{key:"addCountryEvent",value:function(){var e=this,t=this.options,r=t.drillDownEvent;this.provinceLayer.fillLayer.on(t.drillDownTriggerEvent,(function(t){var i=t.feature.properties.adcode,n="Province";(e.drillState="Province",e.options.regionDrill)&&(i=hi[t.feature.properties.REGION_CODE].child,e.drillState="Region",n="Region");e.options.autoUpdateData&&e.drillDown(i),-1!==e.drillList.indexOf(n)&&(e.provinceLayer.hide(),r&&r(t.feature.properties,n,i))}))}},{key:"addRegionEvent",value:function(){var e=this,t=this.options,r=t.drillDownTriggerEvent,i=t.drillUpEvent,n=t.drillDownEvent;this.regionLayer.fillLayer.on(t.drillUpTriggerEvent,(function(t){e.drillUp("Country"),-1!==e.drillList.indexOf("Country")&&i&&i({from:"region",to:"country"})})),this.regionLayer.fillLayer.on(r,(function(t){e.drillState="Province",e.options.autoUpdateData&&e.drillDown(t.feature.properties.adcode),-1!==e.drillList.indexOf("Province")&&(e.regionLayer.hide(),n&&n(t.feature.properties,"Province",t.feature.properties.adcode))}))}},{key:"addProvinceEvent",value:function(){var e=this,t=this.options,r=t.drillDownTriggerEvent,i=t.drillUpEvent,n=t.drillDownEvent;this.cityLayer.fillLayer.on(t.drillUpTriggerEvent,(function(){e.drillState="Province";var t=e.options.regionDrill?"Region":"Country";e.drillUp(t),-1!==e.drillList.indexOf(t)&&i&&i({to:t,from:"Province"})})),this.cityLayer.fillLayer.on(r,(function(t){e.drillState="City",e.options.autoUpdateData&&e.drillDown(t.feature.properties.adcode),-1!==e.drillList.indexOf("City")&&n&&n(t.feature.properties,"City",t.feature.properties.adcode)}))}},{key:"addCityEvent",value:function(){var e=this,t=this.options,r=t.drillUpEvent;this.countyLayer.fillLayer.on(t.drillUpTriggerEvent,(function(){e.drillUp("Province"),-1!==e.drillList.indexOf("Province")&&r&&r({to:"Province",from:"city"})}))}},{key:"show",value:function(){this.layers.forEach((function(e){return e.show()}))}},{key:"hide",value:function(){this.layers.forEach((function(e){return e.hide()}))}},{key:"destroy",value:function(){this.layers.forEach((function(e){return e.destroy()}))}},{key:"showProvinceView",value:function(e,t,r){this.cityLayer.show(),this.cityLayer.updateDistrict(e,t,r),this.cityLayer.fillLayer.fitBounds(),this.options.regionDrill?this.regionLayer.hide():this.provinceLayer.hide(),this.drillState="Province"}},{key:"showCityView",value:function(e,t,r){this.countyLayer.show();var i="".concat(e);"5000"===i.substr(0,4)?i=[i.substr(0,2)+"0100",i.substr(0,2)+"0200"]:"00"===i.substr(2,2)&&"810000"!==i&&"820000"!==i&&(i=[i.substr(0,2)+"0100"]),this.countyLayer.updateDistrict(i,t,r),this.countyLayer.fillLayer.fitBounds(),this.cityLayer.hide(),this.drillState="City"}},{key:"showRegionView",value:function(e,t,r){this.regionLayer.show(),this.regionLayer.updateDistrict(e,t,r),this.regionLayer.fillLayer.fitBounds(),this.provinceLayer.hide(),this.drillState="Region"}},{key:"drillUp",value:function(e){if(-1!==this.drillList.indexOf(e))switch(e){case"Province":this.cityLayer.show(),this.cityLayer.fillLayer.fitBounds(),this.countyLayer.hide(),this.drillState="Province";break;case"Country":this.provinceLayer.show(),this.provinceLayer.fillLayer.fitBounds(),this.options.regionDrill?this.regionLayer.hide():this.cityLayer.hide(),this.drillState="Country";break;case"Region":this.options.regionDrill&&(this.regionLayer.show(),this.regionLayer.fillLayer.fitBounds(),this.cityLayer.hide(),this.drillState="Region")}}},{key:"drillDown",value:function(e,t,r){if(-1!==this.drillList.indexOf(this.drillState))switch(this.drillState){case"Province":this.showProvinceView(e,t,r);break;case"Region":this.showRegionView(e,t,r);break;case"City":this.showCityView(e,t,r)}}},{key:"updateData",value:function(e,t,r){switch(e){case"Country":case"province":this.provinceLayer.updateData(t,r);break;case"Region":case"region":this.regionLayer.updateData(t,r);break;case"Province":case"city":this.cityLayer.updateData(t,r);break;case"City":case"county":this.countyLayer.updateData(t,r)}}},{key:"getLayerOption",value:function(e){var t=this.options,r=t.joinBy,n=t.label,o=t.bubble,a=t.fill,s=t.popup,u=t.geoDataLevel,l=t.onClick,c=e.toLowerCase()+"Data";return i({data:this.options[c],joinBy:r,label:n,bubble:o,fill:a,popup:s,onClick:l,geoDataLevel:u},this.options[e.toLowerCase()])}},{key:"initLayers",value:function(e){var t=this.getViewList();-1!==t.indexOf("Country")&&(this.provinceLayer=new di(e,i({},this.getLayerOption("Province")))),-1!==t.indexOf("Region")&&(this.regionLayer=new vi(e,this.getLayerOption("Region"))),-1!==t.indexOf("Province")&&(this.cityLayer=new ci(e,this.getLayerOption("City"))),-1!==t.indexOf("City")&&(this.countyLayer=new fi(e,this.getLayerOption("County")))}},{key:"initLayerEvent",value:function(){var e=this,t=this.getViewList();this.options.customTrigger||(-1!==t.indexOf("Country")&&this.provinceLayer.on("loaded",(function(){e.addCountryEvent(),"Country"!==e.options.viewStart&&e.provinceLayer.hide(),e.layers.push(e.provinceLayer)})),-1!==t.indexOf("Region")&&this.regionLayer.on("loaded",(function(){e.addRegionEvent(),"Region"!==e.options.viewStart&&e.regionLayer.hide(),e.layers.push(e.regionLayer)})),-1!==t.indexOf("Province")&&this.cityLayer.on("loaded",(function(){e.addProvinceEvent(),"Province"!==e.options.viewStart&&e.cityLayer.hide(),e.layers.push(e.cityLayer)})),-1!==t.indexOf("City")&&this.countyLayer.on("loaded",(function(){e.addCityEvent(),"City"!==e.options.viewStart&&e.countyLayer.hide(),e.layers.push(e.countyLayer)})))}},{key:"getViewList",value:function(){var e=this.options,t=e.viewStart,r=e.viewEnd,i=pi;this.options.regionDrill||-1===i.indexOf("Region")||i.splice(1,1);var n=i.indexOf(t),o=i.indexOf(r);if(-1===n||-1===o||n>o)throw Error(" viewStart, viewEnd ");return i.slice(n,o+1)}},{key:"getProperties",value:function(e,t){var r=Array.isArray(t)?t:[t],i=e.features.filter((function(e){var t=e.properties.adcode;return-1!==r.indexOf(t)||-1!==r.indexOf(""+t)}));return i[0]?i[0].properties:{}}},{key:"enablePopup",value:function(){this.cityLayer&&this.cityLayer.enablePopup(),this.countyLayer&&this.countyLayer.enablePopup(),this.provinceLayer&&this.provinceLayer.enablePopup(),this.regionLayer&&this.regionLayer.enablePopup()}},{key:"disablePopup",value:function(){this.cityLayer&&this.cityLayer.disablePopup(),this.countyLayer&&this.countyLayer.disablePopup(),this.provinceLayer&&this.provinceLayer.disablePopup(),this.regionLayer&&this.regionLayer.disablePopup()}}]),e}(),wi=function(e){c(s,e);var r,n=d(s);function s(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,s),(t=n.call(this,e,r)).loadData().then((function(e){var r,i=b(e,3),n=i[1],o=i[2];t.addFillLayer(i[0]),t.options.showBorder&&t.addFillLine(n),(null===(r=t.options.label)||void 0===r?void 0:r.enable)&&t.addLabelLayer(o,"json"),t.emit("loaded"),t.loaded=!0})),t}return u(s,[{key:"addFillLine",value:function(e){var t={type:"FeatureCollection",features:e.features.filter((function(e){return"10"===e.properties.type||"1"===e.properties.type||"11"===e.properties.type||"8"===e.properties.type}))},r=e.features.filter((function(e){return"10"!==e.properties.type&&"1"!==e.properties.type&&"11"!==e.properties.type&&"8"!==e.properties.type}));this.addNationBorder({type:"FeatureCollection",features:r},t)}},{key:"loadData",value:(r=o(regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=It(this.options.geoDataLevel).world,e.next=3,this.fetchData(t.fill);case 3:return r=e.sent,e.next=6,this.fetchData(t.line);case 6:return n=e.sent,o=r.features.map((function(e){return i(i({},e.properties),{},{center:[e.properties.x,e.properties.y]})})),e.abrupt("return",[r,n,o]);case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"addNationBorder",value:function(e,r){var i=this.options,n=i.nationalStroke,o=i.nationalWidth,a=i.coastlineStroke,s=i.chinaNationalStroke,u=i.chinaNationalWidth,l=i.coastlineWidth,c=i.visible,f=i.zIndex,p=new t.LineLayer({zIndex:f+.1,visible:c}).source(e).size("type",(function(e){return"0"===e?u:"2"===e||"9"===e?l:o})).color("type",(function(e){return"0"===e?s:"2"===e||"9"===e?a:n})),h=new t.LineLayer({zIndex:f+.1,visible:c}).source(r).size("type",(function(e){return"1"===e?u:o})).shape("line").color("type",(function(e){return"1"===e?s:n})).style({lineType:"dash",dashArray:[2,2]});this.scene.addLayer(p),this.scene.addLayer(h),this.layers.push(p,h)}}]),s}(li);e.CityLayer=fi,e.CountryLayer=di,e.CountyLayer=yi,e.DRILL_TYPE_LIST=pi,e.DataConfig=Zt,e.DrillDownLayer=gi,e.ProvinceLayer=ci,e.RegionLayer=vi,e.RegionList=hi,e.WorldLayer=wi,e.getDataConfig=It,e.getRegionByAdcode=function(e){return Object.values(hi).find((function(t){return-1!==t.child.indexOf(e)}))},e.setDataConfig=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt;Et(Nt[t],e)},e.setDataLevel=Ut,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=l7-district.min.js.map
